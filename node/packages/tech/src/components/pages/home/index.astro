---
import { Footer } from "../../parts/footer";
import { ScrollIcon } from "../../parts/scroll-icon";

import AboutMeSection from "./AboutMeSection.astro";
import { PostsSection } from "./PostsSection";
import TopSection from "./TopSection.astro";
import * as styles from "./index.css";

import type { TechPost } from "../../../api/notion/tech";

interface Props {
  posts: TechPost[];
}

const { posts } = Astro.props;
---

<div class={styles.contentAnimation}>
  <TopSection />

  <div class={styles.contentBg}>
    <div class={styles.content}>
      <AboutMeSection />

      <PostsSection posts={posts} />

      <div class={styles.footer}>
        <Footer />
      </div>
    </div>
  </div>
</div>
<ScrollIcon
  className={styles.scrollIcon}
  id="scroll-icon"
  direction="up"
  to="#"
/>
<div class={styles.overlay}></div>

<script>
  const scrollIcon = document.getElementById("scroll-icon");

  document.addEventListener("scroll", () => {
    if (!scrollIcon) return;

    const scrollY = window.scrollY;

    if (scrollY > 100) {
      scrollIcon.style.opacity = "1";
      scrollIcon.style.pointerEvents = "auto";
    } else {
      scrollIcon.style.opacity = "0";
      scrollIcon.style.pointerEvents = "none";
    }
  });
</script>
